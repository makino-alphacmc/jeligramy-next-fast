# API・データ設計（共通パーツ）

全画面で共通するレイアウト・コンポーネント（`../../ui/COMMON.md`・`../../ui/mock/common.svg`）の設計。各画面の main contents は別設計。

---

## 1. 画面項目一覧

| 項目名 | I/O | 編集仕様 | 関連API |
|--------|-----|----------|---------|
| ヘッダー（サイト名・アバター） | 出力 | 表示のみ。アバターは認証時は現在ユーザー | GET /api/auth/me |
| サイドメニュー | 出力 | 表示のみ。Home / New post / Profile / Drafts / Settings / Logout | —（遷移先は各画面） |
| パンくず | 出力 | 表示のみ。現在階層を表示、クリックで上位へ遷移 | — |
| フッター | 出力 | 表示のみ。コピーライト・Terms \| Privacy | — |
| メインコンテンツエリア | 出力 | 各画面のコンテンツを表示する枠のみ。スクロール可能 | 画面ごと |
| 投稿カード（共通部品） | 入出力 | 投稿者・サムネ・タイトル・説明・いいね数・コメント数・3点メニュー。利用画面（トップ等）でデータ取得 | GET /api/posts, GET /api/auth/me, POST/DELETE /api/posts/:id/likes, PATCH/DELETE /api/posts/:id（利用画面で使用） |

---

## 2. イベント一覧

| イベント名 | トリガー | 編集仕様 | 関連API |
|------------|----------|----------|---------|
| ヘッダーアバタークリック | アバタータップ | プロフィール・設定・ログアウト等メニュー表示（他設計） | GET /api/auth/me（表示用） |
| サイドメニュー Home | 項目タップ | トップ（投稿一覧）へ遷移 | — |
| サイドメニュー New post | 項目タップ | 新規投稿画面へ遷移 | — |
| サイドメニュー Profile | 項目タップ | プロフィール画面へ遷移 | — |
| サイドメニュー Drafts | 項目タップ | 下書き一覧へ遷移 | — |
| サイドメニュー Settings | 項目タップ | 設定画面へ遷移 | — |
| サイドメニュー Logout | 項目タップ | ログアウト・セッション無効化 | POST /api/auth/logout（想定） |
| パンくずリンククリック | リンクタップ | 上位階層へ遷移 | — |
| フッター Terms / Privacy | リンクタップ | 利用規約・プライバシーページへ（静的想定） | — |

---

## 3. 機能概要

### 3.1 API

| API名 | 用途 | メソッド | パラメーター | 概要（カラム名） |
|-------|------|----------|--------------|------------------|
| 現在ユーザー取得 | ヘッダーアバター・メニュー表示 | GET | — | id, username, avatar_url |
| ログアウト | サイドメニュー Logout | POST | — | —（セッション無効化） |

※ 投稿カードで使う API（投稿一覧・いいね・編集・削除）はトップ等の画面設計に記載。

### 3.2 データテーブル（マスター）

| テーブル名 | 用途 | カラム |
|------------|------|--------|
| users | ヘッダーアバター・本人表示 | id, username, avatar_url |

※ 共通パーツから参照するのは現在ユーザー（users）のみ。posts / likes / comments は各画面（トップ等）の設計で参照。
